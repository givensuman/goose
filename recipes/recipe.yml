---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: goose
description: given's own operating system experiment

base-image: ghcr.io/ublue-os/base-main
image-version: 42

modules:
  - type: files
    files:
      - source: system
        destination: /

  - type: dnf
    repos:
      cleanup: false
      files:
        - https://github.com/terrapkg/subatomic-repos/raw/main/terra.repo
      nonfree: rpmfusion
    install:
      packages:
        - ghostty
        - fish
        # CLI programs
        - act
        - bat
        - bottom
        - delve
        - eza
        - fd
        - fzf
        - gh
        - lazygit
        - mise
        - neovim
        - shellcheck
        - shfmt
        - tree-sitter
        - yazi
        - zoxide
    group-install:
      packages:
        - cosmic-desktop
    group-remove:
      packages:
        - gnome-desktop

  - type: akmods
    base: main
    install:
      - framework-laptop

  - type: initramfs

  - type: chezmoi
    repository: https://github.com/givensuman/goose

  - type: justfiles

  - type: systemd
    system:
      enabled:
        - cosmic-greeter.service
      masked:
        - gdm.service

  - type: signing
